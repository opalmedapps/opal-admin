{% extends "base.html" %}
{% load i18n %}

{% load crispy_forms_tags %}
{% load render_table from django_tables2 %}

{% block heading %}
  {% translate "Opal Registration" %}
{% endblock %}

{% block content %}
  <form method="post" id="contentForm" up-submit up-target="#contentForm" novalidate>
    {% csrf_token %}
    {{ management_form }}

    <fieldset class="mb-3">
      <legend>{% translate "Patient Details" %}</legend>
      {% crispy search_form %}
    </fieldset>

    {% if patient_form %}
      {% render_table patient_table %}
      {% crispy patient_form %}
    {% endif %}

    {% if relationship_form %}
      <fieldset class="mt-3">
        <legend>{% translate "Requestor Details" %}</legend>
        {% crispy relationship_form %}
      </fieldset>
    {% endif %}

    {% if confirm_form %}
      {% crispy confirm_form %}
    {% endif %}

    {% #form_actions %}
      {% form_cancel href='/'|add:request.resolver_match.route %}
      <input type="submit" name="next" class="btn btn-primary" value="{{ next_button_text }}" />
    {% /form_actions %}
  </form>
  <style>
    [data-title]:hover:after {
        opacity: 1;
        transition: all 0.1s ease 0.5s;
        visibility: visible;
    }
    [data-title]:after {
        content: attr(data-title);
        background-color: #FFFFFF;
        color: #111;
        font-size: 100%;
        position: absolute;
        padding: 1px 5px 2px 5px;
        bottom: -1.8em;
        left: 2.0em;
        white-space: nowrap;
        box-shadow: 1px 1px 3px #222222;
        opacity: 0;
        border: 1px solid #111111;
        z-index: 99999;
        visibility: hidden;
        border-radius: 5px;
    }
    [data-title] {
        position: relative;
    }
  </style>
{% endblock %}
