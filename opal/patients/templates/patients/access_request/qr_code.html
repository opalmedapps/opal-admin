{% extends "base.html" %}
{% load static %}
{% load i18n %}

{% load crispy_forms_tags %}

{% block heading %}
  {%translate "Opal Patient Registration Code" %}
{% endblock %}

{% block content %}
  <div class="card">
      <div class="row">
        <div class="card-body col-md-8 col-sm-12 p-5">
          <div class="vstack gap-3">
            <div>{% translate "A unique one-time Opal registration code has been created for the following patient:" %}</div>
            <ul>
              <div class="row mt-3"><div class="font-weight-bold">{% translate "Name:" %}</div><div>&nbsp;{{ patient }} </div></div>
              <div class="row"><div class="font-weight-bold">{% translate "Hospital Name:" %} </div><div>&nbsp;{{ hospital }} </div></div>
            </ul>
            <br>
            <div class="row">
              <div class="col-auto">{%translate "Instructions" %}</div>
              <div class="col"><hr></div>
            </div>
            <li>{% translate "Inform the requestor that the code is valid for 24 hours." %}</li>
            <li class="text-wrap">{% translate "Inform the requestor that access to patient data is subject to approval by Medical Records and inform them about any steps required to be done as per hospital policy. Upon confirmation by Medical Records, the user will receive a push notification and email to inform them that they can access the patient's data in the app." %}</li>
            <li>{% translate "Inform the requestor how to proceed if the code expired (as per hospital policy)." %}</li>
            <li>{% translate "Inform the requestor to create their Opal user account using the above code" %}</li>
            <ul class="mb-0">
              <li>{% translate "URL: " %}<a href={{ registration_url }} class="text-primary text-decoration-underline font-weight-bold">{{ registration_url }}</a></li>
              <li>{% translate "Offer to scan the QR code to open the registration website" %}</li>
              <li>{% translate "Offer to receive the registration link via SMS" %}</li>
            </ul>
          </div>
        </div>
        <div class="card-body col-md-4 col-sm-12 p-5">
          <div class="vstack gap-3">
            <div class="text-center font-weight-bold">{% translate "Code" %}</div>
            <div class="h2 text-center font-weight-bold">{{ registration_code.code }}</div>
            <div><img src="data:image/svg+xml;utf8;base64,{{ qrcode|safe }}" class="img-fluid d-block mx-auto text-center w-75"></div>
          </div>
        </div>
      </div>
    </div>
  </div>
{% endblock %}
